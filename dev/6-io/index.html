<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Exporting and importing constraint systems · ConstraintTrees.jl</title><meta name="title" content="Exporting and importing constraint systems · ConstraintTrees.jl"/><meta property="og:title" content="Exporting and importing constraint systems · ConstraintTrees.jl"/><meta property="twitter:title" content="Exporting and importing constraint systems · ConstraintTrees.jl"/><meta name="description" content="Documentation for ConstraintTrees.jl."/><meta property="og:description" content="Documentation for ConstraintTrees.jl."/><meta property="twitter:description" content="Documentation for ConstraintTrees.jl."/><meta property="og:url" content="https://cobrexa.github.io/ConstraintTrees.jl/stable/6-io/"/><meta property="twitter:url" content="https://cobrexa.github.io/ConstraintTrees.jl/stable/6-io/"/><link rel="canonical" href="https://cobrexa.github.io/ConstraintTrees.jl/stable/6-io/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ConstraintTrees.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">README</a></li><li><a class="tocitem" href="../0-quickstart/">Quick start</a></li><li><a class="tocitem" href="../1-metabolic-modeling/">Example: Metabolic modeling</a></li><li><a class="tocitem" href="../2-quadratic-optimization/">Example: Quadratic optimization</a></li><li><a class="tocitem" href="../3-mixed-integer-optimization/">Example: Mixed integer optimization (MILP)</a></li><li><a class="tocitem" href="../4-functional-tree-processing/">Example: Processing the trees functionally</a></li><li><a class="tocitem" href="../5-jump-integration/">Better integration with JuMP</a></li><li class="is-active"><a class="tocitem" href>Exporting and importing constraint systems</a><ul class="internal"><li><a class="tocitem" href="#Serialization"><span>Serialization</span></a></li><li><a class="tocitem" href="#De-serialization"><span>De-serialization</span></a></li></ul></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Exporting and importing constraint systems</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Exporting and importing constraint systems</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/COBREXA/ConstraintTrees.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/COBREXA/ConstraintTrees.jl/blob/master/docs/src/6-io.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Exporting-and-importing-constraint-systems"><a class="docs-heading-anchor" href="#Exporting-and-importing-constraint-systems">Exporting and importing constraint systems</a><a id="Exporting-and-importing-constraint-systems-1"></a><a class="docs-heading-anchor-permalink" href="#Exporting-and-importing-constraint-systems" title="Permalink"></a></h1><p>To ease communication with other software, it is possible to export constraint trees to a file and re-import them. That may serve various purposes:</p><ul><li>you can exchange the systems in constraint trees more easily than by sharing the &quot;builder&quot; scripts, and more reliably and portably than with Julia&#39;s general serialization capabilities (in package <code>Serialization</code>)</li><li>you can exchange the system with different software (and different programming environments) which may e.g. implement other solving and analysis methods</li><li>you may separate your software into a tree-building and tree-solving part, both more lightweight and more suitable to use in resource-constrained environments (such as on HPCs).</li></ul><p>The package exports functions <a href="../reference/#ConstraintTrees.serialize-Tuple{Between}"><code>serialize</code></a> and <a href="../reference/#ConstraintTrees.deserialize-Tuple{Type{Between}, Vector}"><code>deserialize</code></a> that convert the constraint trees to and from Julia containers (dictionaries and vectors that only contain simple data such as strings and numbers). These can be further converted to JSON or other data exchange formats.</p><p>For demonstration, we are going to make a simple constraint tree:</p><pre><code class="language-julia hljs">import ConstraintTrees as C

t = C.variables(keys = [:x, :y], bounds = C.Between(-10, 10))
t =
    :point^t *
    :difference^C.Constraint(t.x.value - t.y.value, C.EqualTo(3)) *
    :length^C.Constraint(C.squared(t.x.value) + C.squared(t.y.value))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ConstraintTree with 3 elements:
  :difference =&gt; Constraint(LinearValue(#= ... =#), EqualTo(3.0))
  :length     =&gt; Constraint(QuadraticValue(#= ... =#))
  :point      =&gt; ConstraintTree(#= 2 elements =#)</code></pre><p>In the &quot;nice formatting&quot; the tree looks as follows:</p><pre><code class="language-julia hljs">C.pretty(t)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┬─difference: 1.0*x[1] + -1.0*x[2] = 3.0
├─length: 1.0*x[1]*x[1] + 1.0*x[2]*x[2]
╰─point
  ╰─┬─x: 1.0*x[1] ∈ [-10.0, 10.0]
    ╰─y: 1.0*x[2] ∈ [-10.0, 10.0]</code></pre><h2 id="Serialization"><a class="docs-heading-anchor" href="#Serialization">Serialization</a><a id="Serialization-1"></a><a class="docs-heading-anchor-permalink" href="#Serialization" title="Permalink"></a></h2><p>Serialization converts the tree to a Dict with appropriate contents:</p><pre><code class="language-julia hljs">C.serialize(t)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{String, Dict{String, Dict{String}}} with 1 entry:
  &quot;tree&quot; =&gt; Dict(&quot;length&quot;=&gt;Dict{String, Any}(&quot;value&quot;=&gt;Dict{String, Vector}(&quot;weights&quot;=&gt;[1.0, 1.0], &quot;idxs&quot;=&gt;[[1, 1], [2, 2]]), &quot;value_type&quot;=&gt;&quot;quadratic…</code></pre><p>The arguably easiest way to &quot;export&quot; the file is to convert it to JSON:</p><pre><code class="language-julia hljs">import JSON

    JSON.print(C.serialize(t), 2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">{
  &quot;tree&quot;: {
    &quot;length&quot;: {
      &quot;value&quot;: {
        &quot;weights&quot;: [
          1.0,
          1.0
        ],
        &quot;idxs&quot;: [
          [
            1,
            1
          ],
          [
            2,
            2
          ]
        ]
      },
      &quot;value_type&quot;: &quot;quadratic&quot;
    },
    &quot;point&quot;: {
      &quot;tree&quot;: {
        &quot;x&quot;: {
          &quot;bound_type&quot;: &quot;between&quot;,
          &quot;value&quot;: {
            &quot;weights&quot;: [
              1.0
            ],
            &quot;idxs&quot;: [
              1
            ]
          },
          &quot;bound&quot;: [
            -10.0,
            10.0
          ],
          &quot;value_type&quot;: &quot;linear&quot;
        },
        &quot;y&quot;: {
          &quot;bound_type&quot;: &quot;between&quot;,
          &quot;value&quot;: {
            &quot;weights&quot;: [
              1.0
            ],
            &quot;idxs&quot;: [
              2
            ]
          },
          &quot;bound&quot;: [
            -10.0,
            10.0
          ],
          &quot;value_type&quot;: &quot;linear&quot;
        }
      }
    },
    &quot;difference&quot;: {
      &quot;bound_type&quot;: &quot;equal_to&quot;,
      &quot;value&quot;: {
        &quot;weights&quot;: [
          1.0,
          -1.0
        ],
        &quot;idxs&quot;: [
          1,
          2
        ]
      },
      &quot;bound&quot;: 3.0,
      &quot;value_type&quot;: &quot;linear&quot;
    }
  }
}</code></pre><p>...and with appropriate functions, save the JSON to disk:</p><pre><code class="language-julia hljs">open(&quot;ct-test.json&quot;, &quot;w&quot;) do f
    JSON.print(f, C.serialize(t))
end</code></pre><h2 id="De-serialization"><a class="docs-heading-anchor" href="#De-serialization">De-serialization</a><a id="De-serialization-1"></a><a class="docs-heading-anchor-permalink" href="#De-serialization" title="Permalink"></a></h2><p>Because of the involved polymorphism, deserialization functions need to know the type of what is actually being parsed. With that in hand, the JSON can be re-loaded as follows, giving the same tree:</p><pre><code class="language-julia hljs">t2 = C.deserialize(C.ConstraintTree, JSON.parsefile(&quot;ct-test.json&quot;))

C.pretty(t2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┬─difference: 1.0*x[1] + -1.0*x[2] = 3.0
├─length: 1.0*x[1]*x[1] + 1.0*x[2]*x[2]
╰─point
  ╰─┬─x: 1.0*x[1] ∈ [-10.0, 10.0]
    ╰─y: 1.0*x[2] ∈ [-10.0, 10.0]</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../5-jump-integration/">« Better integration with JuMP</a><a class="docs-footer-nextpage" href="../reference/">Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Tuesday 2 September 2025 17:48">Tuesday 2 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
